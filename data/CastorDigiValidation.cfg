process CASTORDIGIVALIDATION  = {

  service = MessageLogger {
          untracked vstring destinations = { "cout" }
          untracked PSet cout = {
                    untracked string threshold = "INFO"
          }
  }

  source = PoolSource {
     untracked vstring fileNames = {'file:simevent.root'}
     untracked uint32 debugVebosity = 100
     untracked bool   debugFlag     = true
  }

	
  include "SimGeneral/MixingModule/data/mixNoPU.cfi"
#  include "CalibCalorimetry/Configuration/data/Hcal_FakeConditions.cff"
#  include "CalibCalorimetry/CastorCalib/data/Castor_Conditions.cff"
  include "Geometry/CaloEventSetup/data/CaloGeometry.cff"
  include "SimCalorimetry/CastorSim/data/castordigi.cfi"
  include "RecoLocalCalo/CastorReco/test/CastorSimpleReconstructor.cfi"

  es_module castor_db_producer = CastorDbProducer {
   untracked vstring dump = {"Pedestals","PedestalWidths","Gains","GainWidths","QIEData","ChannelQuality","ElectronicsMap"}
#   untracked vstring dump = {"Pedestals","PedestalWidths","Gains","GainWidths","QIEData","ElectronicsMap"}  
   untracked string file = "/tmp/katsas/dump_castor.txt"
  }

#  es_source es_hardcode = CastorHardcodeCalibrations {untracked vstring toGet = {"Pedestals","PedestalWidths","Gains","GainWidths","QIEData","ChannelQuality","ElectronicsMap"}}

  es_source es_ascii = CastorTextCalibrations { VPSet input = {
                 {string object = "ElectronicsMap"
                  FileInPath file = "SimCalorimetry/CastorSim/data/castor_emap_tb08.txt"},
                 {string object = "Pedestals"
                  FileInPath file = "SimCalorimetry/CastorSim/data/castor_pedestals_test.txt"},
                 {string object = "Gains"
                  FileInPath file = "SimCalorimetry/CastorSim/data/castor_gains_TB_cor.txt"},
                 {string object = "QIEData"
                  FileInPath file = "SimCalorimetry/CastorSim/data/castor_qie_test2.txt"},
                 {string object = "ChannelQuality"
                 FileInPath file = "SimCalorimetry/CastorSim/data/castor_quality.txt"},
		{string object = "GainWidths"
                 FileInPath file = "SimCalorimetry/CastorSim/data/castor_gain_widths_test.txt"},
		{string object = "PedestalWidths"
                 FileInPath file = "SimCalorimetry/CastorSim/data/castor_pedestal_widths_test.txt"}
           }
        }  
#  es_source es_hardcode = CastorHardcodeCalibrations {untracked vstring toGet = {"Pedestals","PedestalWidths","Gains","GainWidths","QIEData","ChannelQuality","ElectronicsMap"}}


  module digiDumper = HcalDigiDump {}
  service = RandomNumberGeneratorService {
     PSet moduleSeeds = {
       untracked uint32 castorDigis = 1
      }
  }

  include "Geometry/CMSCommonData/data/cmsAllGeometryXML.cfi"
  module hitDumper = HcalRecHitDump { }
  module hitAnalyzer = CastorHitAnalyzer {}
  module digiAnalyzer = CastorDigiAnalyzer {}

  module o1 = PoolOutputModule {untracked string fileName="./digiout.root"}

  path p = { mix, castorDigis, castorreco, hitAnalyzer, hitDumper,digiAnalyzer}
  endpath outpath = {o1}	
}
